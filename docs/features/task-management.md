# ã‚¿ã‚¹ã‚¯ç®¡ç†æ©Ÿèƒ½ä»•æ§˜æ›¸

## æ¦‚è¦
Slackãƒãƒ£ãƒ³ãƒãƒ«å†…ã§ãƒãƒ¼ãƒ å‘ã‘ã‚¿ã‚¹ã‚¯ã®ä½œæˆã€é€²æ—ç®¡ç†ã€å®Œäº†å‡¦ç†ã‚’è¡Œã†æ©Ÿèƒ½

## æ©Ÿèƒ½ä¸€è¦§

### 1. ã‚¿ã‚¹ã‚¯ä½œæˆæ©Ÿèƒ½
- **ã‚¢ã‚¯ã‚»ã‚¹**: ãƒãƒ£ãƒ³ãƒãƒ«ãƒ¡ãƒ‹ãƒ¥ãƒ¼ â†’ ã‚¿ã‚¹ã‚¯ç®¡ç† â†’ ã‚¿ã‚¹ã‚¯ä½œæˆ
- **å ´æ‰€**: ãƒãƒ£ãƒ³ãƒãƒ«å†…
- **æ©Ÿèƒ½**: æ–°ã—ã„ã‚¿ã‚¹ã‚¯ã®ç™»éŒ²

#### ä½œæˆãƒ•ãƒ­ãƒ¼
1. ã‚¿ã‚¹ã‚¯ä½œæˆãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯
2. ã‚¿ã‚¹ã‚¯æƒ…å ±å…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ è¡¨ç¤º
3. ã‚¿ã‚¹ã‚¯è©³ç´°å…¥åŠ›ï¼ˆã‚¿ã‚¤ãƒˆãƒ«ãƒ»èª¬æ˜ãƒ»æ‹…å½“è€…ãƒ»æœŸé™ï¼‰
4. ä¿å­˜å®Ÿè¡Œ
5. ãƒãƒ£ãƒ³ãƒãƒ«ã«ä½œæˆé€šçŸ¥

#### å…¥åŠ›é …ç›®
- **ã‚¿ã‚¹ã‚¯ã‚¿ã‚¤ãƒˆãƒ«**: å¿…é ˆã€100æ–‡å­—ä»¥å†…
- **ã‚¿ã‚¹ã‚¯èª¬æ˜**: ä»»æ„ã€500æ–‡å­—ä»¥å†…

### 2. ã‚¿ã‚¹ã‚¯ä¸€è¦§è¡¨ç¤ºæ©Ÿèƒ½
- **ã‚³ãƒãƒ³ãƒ‰**: ãƒãƒ£ãƒ³ãƒãƒ«ãƒ¡ãƒ‹ãƒ¥ãƒ¼ â†’ ã‚¿ã‚¹ã‚¯ç®¡ç† â†’ ã‚¿ã‚¹ã‚¯ä¸€è¦§
- **å ´æ‰€**: ãƒãƒ£ãƒ³ãƒãƒ«å†…
- **æ©Ÿèƒ½**: ç¾åœ¨ã®ã‚¿ã‚¹ã‚¯çŠ¶æ³ã‚’ä¸€è¦§è¡¨ç¤º

#### è¡¨ç¤ºå†…å®¹
- **ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã‚¿ã‚¹ã‚¯**: æœªå®Œäº†ã‚¿ã‚¹ã‚¯ã®ä¸€è¦§
- **ã‚¿ã‚¹ã‚¯æƒ…å ±**: ã‚¿ã‚¤ãƒˆãƒ«ãƒ»æ‹…å½“è€…ãƒ»æœŸé™ãƒ»çŠ¶æ…‹
- **ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³**: å®Œäº†ãƒ»å‰Šé™¤
- **è¡¨ç¤ºé †**: ä½œæˆæ—¥æ™‚é †ï¼ˆæ–°ã—ã„é †ï¼‰

#### è¡¨ç¤ºå½¢å¼
```
ğŸ“‹ ã‚¿ã‚¹ã‚¯ä¸€è¦§ (3ä»¶)
â”ƒ ğŸ‘¤ @user1 | æœŸé™: 12/25
â”ƒ ğŸ“ è©³ç´°èª¬æ˜ãƒ†ã‚­ã‚¹ãƒˆ...
â”ƒ [å®Œäº†] [å‰Šé™¤]
â”— ... (ä»–ã®ã‚¿ã‚¹ã‚¯)
```

### 3. ã‚¿ã‚¹ã‚¯å®Œäº†æ©Ÿèƒ½
- **æ“ä½œ**: ã‚¿ã‚¹ã‚¯ä¸€è¦§ã®ã€Œå®Œäº†ã€ãƒœã‚¿ãƒ³
- **å ´æ‰€**: ãƒãƒ£ãƒ³ãƒãƒ«å†…
- **æ©Ÿèƒ½**: ã‚¿ã‚¹ã‚¯ã‚’å®Œäº†çŠ¶æ…‹ã«å¤‰æ›´

#### å®Œäº†å‡¦ç†
1. å®Œäº†ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯
2. ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°è¡¨ç¤º
3. ç¢ºèªå¾Œã«ã‚¿ã‚¹ã‚¯çŠ¶æ…‹æ›´æ–°
4. å®Œäº†é€šçŸ¥ã‚’ãƒãƒ£ãƒ³ãƒãƒ«ã«æŠ•ç¨¿
5. ã‚¿ã‚¹ã‚¯ä¸€è¦§ã‹ã‚‰é™¤å¤–

#### å®Œäº†æ™‚ã®å¤‰æ›´
- **ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: `pending` â†’ `completed`
- **å®Œäº†æ—¥æ™‚**: ç¾åœ¨æ™‚åˆ»ã‚’è¨˜éŒ²
- **è¡¨ç¤º**: ä¸€è¦§ã‹ã‚‰è‡ªå‹•çš„ã«é™¤å¤–

### 4. ã‚¿ã‚¹ã‚¯å‰Šé™¤æ©Ÿèƒ½
- **æ“ä½œ**: ã‚¿ã‚¹ã‚¯ä¸€è¦§ã®ã€Œå‰Šé™¤ã€ãƒœã‚¿ãƒ³
- **å ´æ‰€**: ãƒãƒ£ãƒ³ãƒãƒ«å†…
- **æ©Ÿèƒ½**: ã‚¿ã‚¹ã‚¯ã®å®Œå…¨å‰Šé™¤

#### å‰Šé™¤å‡¦ç†
1. å‰Šé™¤ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯
2. ç¢ºèªãªã—ã§å³åº§å‰Šé™¤å®Ÿè¡Œ
3. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‹ã‚‰ç‰©ç†å‰Šé™¤
4. å‰Šé™¤é€šçŸ¥ã‚’ãƒãƒ£ãƒ³ãƒãƒ«ã«æŠ•ç¨¿

### 5. ã‚¿ã‚¹ã‚¯ã‚³ãƒãƒ³ãƒ‰æ©Ÿèƒ½
- **ã‚³ãƒãƒ³ãƒ‰**: `!task ã‚¿ã‚¹ã‚¯ã®å†…å®¹`
- **å ´æ‰€**: ãƒãƒ£ãƒ³ãƒãƒ«å†…
- **æ©Ÿèƒ½**: ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³çš„ãªã‚¿ã‚¹ã‚¯æ“ä½œ

#### ã‚³ãƒãƒ³ãƒ‰è§£æ
```python
def parse_task_command(text):
    if text.startswith("!task "):
        parts = text[6:].strip().split()
        command = parts[0] if parts else "list"
        args = parts[1:] if len(parts) > 1 else []
        return command, args
    return None, []
```

## ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«

### channel_tasksãƒ†ãƒ¼ãƒ–ãƒ«
```sql
CREATE TABLE channel_tasks (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  channel_id TEXT NOT NULL,
  channel_name TEXT,
  title TEXT NOT NULL,
  description TEXT,
  assigned_user_id TEXT,
  assigned_user_name TEXT,
  due_date DATE,
  priority TEXT DEFAULT 'medium',
  status TEXT DEFAULT 'pending',
  created_by_user_id TEXT NOT NULL,
  created_by_user_name TEXT,
  completed_at TIMESTAMPTZ,
  created_at TIMESTAMPTZ NOT NULL DEFAULT NOW(),
  updated_at TIMESTAMPTZ NOT NULL DEFAULT NOW()
);
```

### ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹è¨­è¨ˆ
```sql
-- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å‘ä¸Šç”¨ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹
CREATE INDEX idx_channel_tasks_channel_id ON channel_tasks(channel_id);
CREATE INDEX idx_channel_tasks_status ON channel_tasks(status);
CREATE INDEX idx_channel_tasks_assigned_user ON channel_tasks(assigned_user_id);
CREATE INDEX idx_channel_tasks_due_date ON channel_tasks(due_date);
```

### åˆ—å®šç¾©è©³ç´°
- **priority**: 'high', 'medium', 'low'
- **status**: 'pending', 'completed', 'cancelled'
- **due_date**: æœŸé™æ—¥ï¼ˆæ™‚åˆ»ãªã—ï¼‰
- **completed_at**: å®Œäº†æ—¥æ™‚ï¼ˆUTCã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ï¼‰

## UIè¨­è¨ˆä»•æ§˜

### ã‚¿ã‚¹ã‚¯ä½œæˆãƒ•ã‚©ãƒ¼ãƒ 
```json
{
  "type": "modal",
  "title": "æ–°ã—ã„ã‚¿ã‚¹ã‚¯ã‚’ä½œæˆ",
  "blocks": [
    {
      "type": "input",
      "label": "ã‚¿ã‚¹ã‚¯ã‚¿ã‚¤ãƒˆãƒ«",
      "element": {
        "type": "plain_text_input",
        "action_id": "task_title",
        "max_length": 100
      }
    },
    {
      "type": "input",
      "label": "ã‚¿ã‚¹ã‚¯èª¬æ˜",
      "element": {
        "type": "plain_text_input",
        "action_id": "task_description",
        "multiline": true,
        "max_length": 500
      }
    },
    {
      "type": "input",
      "label": "æ‹…å½“è€…",
      "element": {
        "type": "users_select",
        "action_id": "task_assignee"
      }
    }
  ]
}
```

### ã‚¿ã‚¹ã‚¯ä¸€è¦§è¡¨ç¤º
```json
{
  "type": "section",
  "fields": [
    {"type": "mrkdwn", "text": "*ã‚¿ã‚¤ãƒˆãƒ«:* ã‚¿ã‚¹ã‚¯å"},
    {"type": "mrkdwn", "text": "*æ‹…å½“:* <@USER123>"},
    {"type": "mrkdwn", "text": "*æœŸé™:* 2024-12-25"},
    {"type": "mrkdwn", "text": "*å„ªå…ˆåº¦:* é«˜"}
  ],
  "accessory": {
    "type": "overflow",
    "options": [
      {"text": "å®Œäº†", "value": "complete_task_[id]"},
      {"text": "å‰Šé™¤", "value": "delete_task_[id]"}
    ]
  }
}
```

## ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯

### ã‚¿ã‚¹ã‚¯ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ç®¡ç†
```python
class TaskStatus:
    PENDING = "pending"      # æœªå®Œäº†
    COMPLETED = "completed"  # å®Œäº†
    CANCELLED = "cancelled"  # ã‚­ãƒ£ãƒ³ã‚»ãƒ«

def complete_task(task_id):
    return update_task_status(task_id, TaskStatus.COMPLETED)
```

## APIä»•æ§˜

### ã‚¿ã‚¹ã‚¯ä½œæˆAPI
```python
def save_channel_task(task_data: dict) -> dict:
    """
    Args:
        task_data: {
            'channel_id': str,
            'title': str,
            'description': str,
            'assigned_user_id': str,
            'due_date': str,
            'priority': str,
            'created_by_user_id': str
        }
    Returns:
        dict: ä½œæˆã•ã‚ŒãŸã‚¿ã‚¹ã‚¯æƒ…å ±
    """
```

### ã‚¿ã‚¹ã‚¯å–å¾—API
```python
def get_channel_tasks(channel_id: str, status: str = 'pending') -> list:
    """
    Args:
        channel_id: ãƒãƒ£ãƒ³ãƒãƒ«ID
        status: ã‚¿ã‚¹ã‚¯ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
    Returns:
        list: ã‚¿ã‚¹ã‚¯ãƒªã‚¹ãƒˆ
    """
```

### ã‚¿ã‚¹ã‚¯æ›´æ–°API
```python
def update_task_status(task_id: str, status: str) -> bool:
    """
    Args:
        task_id: ã‚¿ã‚¹ã‚¯ID
        status: æ–°ã—ã„ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
    Returns:
        bool: æ›´æ–°æˆåŠŸå¯å¦
    """
```

## ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

### å…¥åŠ›å€¤æ¤œè¨¼
```python
def validate_task_data(data):
    errors = []

    if not data.get('title', '').strip():
        errors.append("ã‚¿ã‚¹ã‚¯ã‚¿ã‚¤ãƒˆãƒ«ã¯å¿…é ˆã§ã™")

    if len(data.get('title', '')) > 100:
        errors.append("ã‚¿ã‚¤ãƒˆãƒ«ã¯100æ–‡å­—ä»¥å†…ã§å…¥åŠ›ã—ã¦ãã ã•ã„")

    if len(data.get('description', '')) > 500:
        errors.append("èª¬æ˜ã¯500æ–‡å­—ä»¥å†…ã§å…¥åŠ›ã—ã¦ãã ã•ã„")

    return errors
```

### æ“ä½œã‚¨ãƒ©ãƒ¼
- **ã‚¿ã‚¹ã‚¯ä¸å­˜åœ¨**: "æŒ‡å®šã•ã‚ŒãŸã‚¿ã‚¹ã‚¯ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“"
- **æ¨©é™ã‚¨ãƒ©ãƒ¼**: "ã“ã®ã‚¿ã‚¹ã‚¯ã‚’æ“ä½œã™ã‚‹æ¨©é™ãŒã‚ã‚Šã¾ã›ã‚“"
- **ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ä¸æ­£**: "ç„¡åŠ¹ãªã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãŒæŒ‡å®šã•ã‚Œã¾ã—ãŸ"

### ã‚·ã‚¹ãƒ†ãƒ ã‚¨ãƒ©ãƒ¼
```python
try:
    result = save_channel_task(task_data)
except Exception as e:
    logger.error(f"Task creation failed: {e}")
    say(text="âŒ ã‚¿ã‚¹ã‚¯ã®ä½œæˆã«å¤±æ•—ã—ã¾ã—ãŸ")
```

## ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ä»•æ§˜

### ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡
- **ãƒãƒ£ãƒ³ãƒãƒ«é™å®š**: å„ãƒãƒ£ãƒ³ãƒãƒ«ã®ã‚¿ã‚¹ã‚¯ã¯è©²å½“ãƒãƒ£ãƒ³ãƒãƒ«ã§ã®ã¿è¡¨ç¤º
- **æ“ä½œæ¨©é™**: å…¨ãƒãƒ£ãƒ³ãƒãƒ«ãƒ¡ãƒ³ãƒãƒ¼ãŒä½œæˆãƒ»å®Œäº†å¯èƒ½
- **å‰Šé™¤æ¨©é™**: ä½œæˆè€…ã®ã¿å‰Šé™¤å¯èƒ½ï¼ˆå°†æ¥æ‹¡å¼µï¼‰

### ãƒ‡ãƒ¼ã‚¿ä¿è­·
- **å…¥åŠ›ã‚µãƒ‹ã‚¿ã‚¤ã‚º**: XSSæ”»æ’ƒå¯¾ç­–
- **SQLã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³å¯¾ç­–**: ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿åŒ–ã‚¯ã‚¨ãƒª
- **ãƒ‡ãƒ¼ã‚¿æš—å·åŒ–**: é€šä¿¡ãƒ»ä¿å­˜æ™‚ã®æš—å·åŒ–

## ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ä»•æ§˜

### å¿œç­”æ™‚é–“ç›®æ¨™
- **ã‚¿ã‚¹ã‚¯ä½œæˆ**: 1ç§’ä»¥å†…
- **ä¸€è¦§è¡¨ç¤º**: 2ç§’ä»¥å†…
- **ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹æ›´æ–°**: 500msä»¥å†…

### ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£
- **ã‚¿ã‚¹ã‚¯æ•°**: ãƒãƒ£ãƒ³ãƒãƒ«ã‚ãŸã‚Š1,000ä»¶ã¾ã§
- **åŒæ™‚æ“ä½œ**: 20ä¸¦è¡Œå‡¦ç†ã¾ã§
- **å±¥æ­´ä¿æŒ**: å®Œäº†ã‚¿ã‚¹ã‚¯ã¯6ãƒ¶æœˆé–“ä¿æŒ

### æœ€é©åŒ–æ–½ç­–
- **ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹æ´»ç”¨**: ã‚¯ã‚¨ãƒªæ€§èƒ½å‘ä¸Š
- **ãƒšãƒ¼ã‚¸ãƒ³ã‚°**: å¤§é‡ãƒ‡ãƒ¼ã‚¿ã®æ®µéšçš„èª­ã¿è¾¼ã¿
- **ã‚­ãƒ£ãƒƒã‚·ãƒ¥**: é »ç¹ã‚¢ã‚¯ã‚»ã‚¹ãƒ‡ãƒ¼ã‚¿ã®é«˜é€ŸåŒ–
